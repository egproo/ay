# شاشة الانتقال من نظام ووكومرس (Migration from WooCommerce)

## معلومات الشاشة
- **المسار**: `migration/woocommerce`
- **الترتيب**: الشاشة رقم 41 في العمود الجانبي (ضمن قسم الانتقال من الأنظمة الأخرى)
- **الأولوية**: عالية جداً - ضرورية لجذب عملاء ووكومرس للانتقال إلى نظام أيم

## الحالة الحالية
✅ **مكتمل بالكامل** - تم إنشاء جميع المكونات المطلوبة

### المكونات المكتملة:
1. ✅ **Controller**: `dashboard/controller/migration/woocommerce.php` (كان موجود ومتطور)
2. ✅ **Model**: `dashboard/model/migration/woocommerce.php` (تم إنشاؤه)
3. ✅ **View**: `dashboard/view/template/migration/woocommerce.twig` (كان موجود ومتطور)
4. ✅ **Language**: `dashboard/language/ar/migration/woocommerce.php` (تم إنشاؤه)
5. ✅ **Database**: جداول قاعدة البيانات موجودة في النظام

## الوظائف الرئيسية

### 1. الاتصال بمتجر ووكومرس
- إدخال رابط المتجر (WordPress/WooCommerce)
- مفتاح المستهلك (Consumer Key)
- سر المستهلك (Consumer Secret)
- اختبار الاتصال مع REST API

### 2. اختيار البيانات للنقل
#### البيانات الأساسية:
- **المنتجات**: جميع أنواع المنتجات (بسيطة، متغيرة، مجمعة، خارجية)
- **العملاء**: بيانات العملاء وعناوين الفوترة والشحن
- **الطلبات**: جميع الطلبات بحالاتها المختلفة

#### البيانات الإضافية:
- **فئات المنتجات**: التصنيف الهرمي للمنتجات
- **كوبونات الخصم**: جميع كوبونات الخصم وشروطها
- **تقييمات المنتجات**: تقييمات وتعليقات العملاء

### 3. معالجة أنواع المنتجات المختلفة
- **المنتجات البسيطة**: منتجات عادية بسعر واحد
- **المنتجات المتغيرة**: منتجات بخيارات متعددة (لون، حجم، إلخ)
- **المنتجات المجمعة**: مجموعة من المنتجات تباع معاً
- **المنتجات الخارجية**: منتجات تحول لمواقع أخرى
- **المنتجات القابلة للتحميل**: ملفات رقمية
- **المنتجات الافتراضية**: خدمات بدون شحن

### 4. معالجة حالات الطلبات
- **الطلبات المعلقة**: في انتظار الدفع
- **قيد المعالجة**: تم الدفع وفي انتظار التنفيذ
- **المؤجلة**: مؤجلة لسبب ما
- **المكتملة**: تم التسليم بنجاح
- **الملغية**: ألغاها العميل أو المتجر
- **المستردة**: تم استرداد المبلغ
- **الفاشلة**: فشل في الدفع

### 5. التحقق من صحة البيانات
- فحص تكامل بيانات المنتجات
- التحقق من صحة بيانات العملاء
- مراجعة حالات الطلبات
- كشف البيانات المكررة أو المتضاربة

### 6. ربط الحقول المتقدم
- ربط تلقائي للحقول المتشابهة
- معالجة الحقول المخصصة (Custom Fields)
- تحويل البيانات الوصفية (Meta Data)
- معالجة الخصائص والتنويعات

## الجداول المرتبطة

### 1. جداول النقل والمراجعة
```sql
- cod_migration: سجل عمليات النقل
- cod_migration_log: سجل تفصيلي للعمليات
- cod_migration_mapping: ربط الحقول
- cod_migration_temp_wc_*: جداول مؤقتة للبيانات المستوردة من ووكومرس
```

### 2. جداول البيانات المستهدفة
```sql
- cod_product: المنتجات المنقولة
- cod_product_variation: تنويعات المنتجات
- cod_customer: العملاء المنقولون
- cod_order: الطلبات المنقولة
- cod_order_product: منتجات الطلبات
- cod_category: فئات المنتجات
- cod_coupon: كوبونات الخصم
```

### 3. جداول المطابقة والربط
```sql
- cod_migration_wc_product_map: ربط معرفات المنتجات
- cod_migration_wc_customer_map: ربط معرفات العملاء
- cod_migration_wc_order_map: ربط معرفات الطلبات
- cod_migration_wc_category_map: ربط معرفات الفئات
```

## خطوات عملية النقل

### 1. المرحلة الأولى: الإعداد والاتصال
1. إدخال بيانات الاتصال بمتجر ووكومرس
2. إنشاء مفاتيح REST API في ووكومرس
3. اختبار الاتصال والمصادقة
4. فحص إصدار ووكومرس والإضافات

### 2. المرحلة الثانية: اختيار البيانات
1. عرض أنواع البيانات المتاحة
2. تحديد البيانات المراد نقلها
3. اختيار نطاق التواريخ للطلبات
4. تحديد حالات الطلبات المطلوبة

### 3. المرحلة الثالثة: استخراج البيانات
1. الاتصال بـ WooCommerce REST API
2. استخراج البيانات على دفعات (Pagination)
3. معالجة البيانات المعقدة (تنويعات، خصائص)
4. تخزين البيانات في جداول مؤقتة

### 4. المرحلة الرابعة: التحقق والمراجعة
1. فحص تكامل البيانات المستخرجة
2. معالجة البيانات المكررة
3. تحويل تنسيقات البيانات
4. عرض تقرير مفصل للمراجعة

### 5. المرحلة الخامسة: التطبيق النهائي
1. تحويل البيانات إلى تنسيق أيم
2. إنشاء المنتجات وتنويعاتها
3. إدراج العملاء والطلبات
4. ربط العلاقات والمراجع

## الميزات التقنية المتقدمة

### 1. WooCommerce REST API Integration
- استخدام WooCommerce REST API v3
- معالجة المصادقة OAuth 1.0a
- إدارة معدل الطلبات (Rate Limiting)
- معالجة الأخطاء والانقطاعات

### 2. معالجة البيانات المعقدة
- تحويل تنويعات المنتجات
- معالجة الخصائص والقيم
- تحويل البيانات الوصفية
- معالجة الصور والمرفقات

### 3. الأمان والحماية
- تشفير مفاتيح API
- التحقق من صحة البيانات
- حماية من هجمات الحقن
- تسجيل جميع العمليات

### 4. واجهة المستخدم المحسنة
- معالج خطوة بخطوة
- شريط تقدم تفاعلي
- معاينة البيانات المباشرة
- رسائل خطأ واضحة

## خيارات النقل المتقدمة

### 1. أنماط النقل
- **نقل كامل**: جميع البيانات
- **نقل انتقائي**: بيانات محددة
- **نقل تجريبي**: اختبار بدون تطبيق
- **نقل تدريجي**: على مراحل

### 2. خيارات التحويل
- تحويل العملات
- تحويل وحدات القياس
- تعديل الأسعار
- إعادة حساب الضرائب

### 3. معالجة التضارب
- استبدال البيانات الموجودة
- دمج البيانات المتشابهة
- تجاهل البيانات المكررة
- إنشاء نسخ جديدة

## التعامل مع خصائص ووكومرس

### 1. المنتجات المتغيرة
- استخراج الخصائص الأساسية
- تحويل التنويعات إلى منتجات فرعية
- ربط الأسعار والمخزون
- معالجة الصور لكل تنويع

### 2. البيانات الوصفية
- تحويل Custom Fields
- معالجة بيانات الإضافات
- حفظ البيانات الإضافية
- ربط البيانات بالمنتجات

### 3. كوبونات الخصم
- تحويل أنواع الخصم المختلفة
- معالجة شروط الاستخدام
- تحويل قيود الاستخدام
- ربط بالمنتجات والفئات

## التقارير والسجلات

### 1. تقرير النقل
- عدد المنتجات المنقولة
- عدد العملاء والطلبات
- إحصائيات التنويعات
- معدل نجاح العملية

### 2. سجل العمليات
- تسجيل تفصيلي لكل API call
- رسائل الخطأ والتحذيرات
- إحصائيات الأداء
- معلومات التشخيص

### 3. تقرير المراجعة
- مقارنة البيانات
- كشف الاختلافات
- تحليل جودة البيانات
- توصيات للتحسين

## التكامل مع النظام

### 1. ربط محاسبي
- إنشاء قيود للطلبات المكتملة
- ربط العملاء بالحسابات
- معالجة الضرائب والخصومات
- تحديث أرصدة العملاء

### 2. تكامل المخزون
- تحديث كميات المنتجات
- إنشاء حركات جرد
- ربط التنويعات بالمخزون
- تحديث تكاليف المنتجات

### 3. تكامل التجارة الإلكترونية
- ربط المنتجات بالمتجر الإلكتروني
- تحديث أسعار البيع
- معالجة الصور والأوصاف
- إعداد خيارات الشحن

## ما بعد النقل

### 1. التحقق من النتائج
- مراجعة المنتجات المنقولة
- اختبار عمليات البيع
- التأكد من صحة التقارير
- مقارنة الأرصدة

### 2. التحسين والضبط
- تحسين أداء النظام
- ضبط إعدادات المتجر
- تحديث قوالب البريد الإلكتروني
- إعداد طرق الدفع والشحن

### 3. التدريب والدعم
- تدريب فريق المبيعات
- دليل استخدام مخصص
- دعم فني متخصص
- حل المشاكل والاستفسارات

## الفوائد التنافسية

### 1. سهولة الانتقال
- عملية نقل مبسطة
- أتمتة معظم الخطوات
- تقليل الوقت والجهد
- تقليل مخاطر فقدان البيانات

### 2. دعم شامل لووكومرس
- دعم جميع أنواع المنتجات
- معالجة البيانات المعقدة
- تحويل الإضافات المخصصة
- حفظ تاريخ المبيعات

### 3. جودة البيانات
- التحقق من صحة البيانات
- تنظيف وتحسين البيانات
- إزالة التكرار
- ضمان تكامل البيانات

## خطة التطوير المستقبلية

### 1. المرحلة الثانية
- دعم إضافات ووكومرس الشائعة
- نقل بيانات التحليلات
- تكامل مع أنظمة الدفع
- مزامنة مستمرة

### 2. المرحلة الثالثة
- نقل تصميم المتجر
- تحويل صفحات ووردبريس
- دعم المواقع متعددة اللغات
- تحليل ذكي للبيانات

### 3. التحسينات المستمرة
- تحسين واجهة المستخدم
- إضافة خيارات نقل جديدة
- تحسين معالجة الأخطاء
- تطوير أدوات المراجعة

## الخلاصة
شاشة الانتقال من ووكومرس تعتبر أداة استراتيجية مهمة لجذب أصحاب المتاجر الإلكترونية للانتقال إلى نظام أيم. تم تصميمها لتكون شاملة وموثوقة، مع دعم كامل لجميع ميزات ووكومرس المعقدة، مما يضمن نقل ناجح وسلس للبيانات مع الحفاظ على جودتها وتكاملها.
