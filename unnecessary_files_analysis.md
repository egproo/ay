# تحديد الملفات غير الضرورية أو المعيبة

بعد مراجعة شاملة لهيكل MVC للمشروع، تم تحديد عدة فئات من الملفات التي تحتاج إلى اهتمام خاص، إما لإزالتها أو إعادة كتابتها أو دمجها مع ملفات أخرى.

## 1. ملفات تحتوي على كود تصحيح أخطاء (Debug)

هذه الملفات تحتوي على تعليمات `error_reporting` و `display_errors` التي يجب إزالتها في بيئة الإنتاج:

- `controller/accounts/chartaccount.php`
- `controller/accounts/journal.php`
- `controller/accounts/statementaccount.php`
- `controller/catalog/product.php`

هذه الملفات تحتاج إلى مراجعة وإزالة كود التصحيح منها، مع الحفاظ على وظائفها الأساسية.

## 2. ملفات متداخلة في المسؤوليات

### تداخل بين وحدتي المحاسبة (Accounting/Accounts)

هناك تداخل واضح بين المجلدين التاليين:
- `controller/accounting/`
- `controller/accounts/`
- `model/accounting/`
- `model/accounts/`

**التوصية**: دمج هذه الوحدات في وحدة واحدة متماسكة، مع إعادة تنظيم المسؤوليات بشكل منطقي.

### تداخل في نظام الإشعارات

هناك تداخل بين:
- `model/notification/`
- `model/common/notification.php`

**التوصية**: توحيد نظام الإشعارات في مكان واحد، مع تحسين واجهة البرمجة (API) الخاصة به.

### تداخل في نظام السجلات (Logs)

هناك تداخل بين:
- `model/tool/audit_log.php`
- `model/user/activity.php`

**التوصية**: توحيد نظام السجلات في وحدة واحدة شاملة.

## 3. ملفات غير مكتملة

### وحدة المستندات (Document)

وحدة المستندات غير مكتملة، حيث تفتقر إلى:
- ملفات التحكم (Controllers)
- بعض قوالب العرض (Views)
- ملفات اللغة الكاملة

**التوصية**: استكمال الوحدة أو إعادة تصميمها بالكامل.

### وحدة سير العمل (Workflow)

وحدة سير العمل المرئي تبدو غير مكتملة التنفيذ:
- بعض الوظائف قد تكون غير مكتملة
- التكامل مع بقية النظام قد يكون ضعيفاً

**التوصية**: مراجعة شاملة وإما استكمال الوحدة أو تبسيطها.

## 4. ملفات قديمة أو غير مستخدمة

### ملفات قديمة في وحدة المشتريات

تم العثور على مجلد `model/purchase/old/` الذي يحتوي على ملفات قديمة.

**التوصية**: مراجعة هذه الملفات وإزالتها إذا لم تعد مستخدمة.

### ملفات لغة متعددة غير متسقة

هناك عدم اتساق في هيكل ملفات اللغة:
- `language/ar/`
- `language/ar-eg/`
- `language/ar-sa/`

**التوصية**: توحيد ملفات اللغة العربية في مجلد واحد.

## 5. ملفات تحتاج إلى إعادة كتابة

### ملفات التكامل بين المخزون والحسابات

الملفات التالية تحتاج إلى إعادة كتابة لتحسين التكامل بين المخزون والحسابات:
- `model/catalog/product.php`
- `model/inventory/inventory_manager.php`
- `model/accounts/journal.php`

**التوصية**: إعادة تصميم آلية التكامل بين المخزون والحسابات لتكون أكثر بساطة وموثوقية.

### ملفات نقاط البيع (POS)

ملفات نقاط البيع تحتاج إلى مراجعة وتحسين:
- `controller/pos/`
- `model/pos/`

**التوصية**: تحسين التكامل مع نظام المخزون والحسابات.

## 6. ملفات تحتاج إلى تحسين الأداء

### ملفات تقارير المخزون

ملفات تقارير المخزون قد تواجه مشاكل في الأداء مع كميات كبيرة من البيانات:
- `controller/report/inventory_valuation.php`
- `model/report/inventory.php`

**التوصية**: تحسين استعلامات قاعدة البيانات وتنفيذ التخزين المؤقت (Caching) حيثما أمكن.

## خطة العمل المقترحة

1. **المرحلة الأولى**: إزالة كود التصحيح وتنظيف الملفات
   - إزالة تعليمات `error_reporting` و `display_errors`
   - إزالة التعليقات والكود غير المستخدم
   - توحيد أسلوب كتابة الكود

2. **المرحلة الثانية**: دمج الوحدات المتداخلة
   - دمج وحدتي المحاسبة
   - توحيد نظام الإشعارات
   - توحيد نظام السجلات

3. **المرحلة الثالثة**: استكمال الوحدات غير المكتملة
   - استكمال وحدة المستندات
   - تحسين وحدة سير العمل

4. **المرحلة الرابعة**: إعادة كتابة ملفات التكامل الرئيسية
   - تحسين التكامل بين المخزون والحسابات
   - تحسين نظام نقاط البيع

5. **المرحلة الخامسة**: تحسين الأداء العام
   - تحسين استعلامات قاعدة البيانات
   - تنفيذ التخزين المؤقت
   - تحسين تحميل الصفحات

هذه الخطة ستساعد في تنظيف المشروع وتحسين هيكله، مما سيؤدي إلى نظام أكثر استقراراً وقابلية للصيانة.
